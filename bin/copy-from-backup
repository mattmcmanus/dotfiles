#!/bin/sh
BACKUP_DIR="/Volumes/HD Clone/Users/matt"
DEST="/Users/matt"
userdirs=(
    # "code"
    # "Notes"
    # "Downloads"
    # "Dropbox"
    # "Movies"
    # "Pictures"
    # "TV Shows"
    # ".secrets"
    ".aws"
    # ".offlineimap"
    ".puma-dev"
    ".talon"
    # ".vscode"
    ".gnupg"
    # ".ssh"
)

# Also
# /usr/local/var/postgres
#rsync -avz /Volumes/HD\ Clone/usr/local/var/postgres /usr/local/var/postgres

for d in ${!userdirs[@]}; do
    echo "\n\nCopying '${userdirs[$d]}'"
    rsync -az --info=progress2 --exclude '*/node_modules/*' --exclude '*/dist/*' --exclude '*/log/*' --exclude '*/tmp/*' "$BACKUP_DIR/${userdirs[$d]}" "$DEST/"
done

settingsdir=(
    # "com.bombich.ccc"
    # "com.panic.Transmit"
    # "com.pointum.hazeover"
    # "com.privateinternetaccess.vpn"
    # "Choosy"
    # "discord"
    # "Dragon"
    # "Hazel"
    # "minecraft"
    # "Transmission"
    # "Slack"
    # "Bartender"
    # "Airfoil"
    # "Toggl"
    # "iTerm2"
)

for d in ${!settingsdir[@]}; do
    echo "\n\nCopying '${settingsdir[$d]}'"
    rm -rf "$DEST/Library/Application Support/${settingsdir[$d]}"
    rsync -az --info=progress2 --exclude '*/node_modules/*' --exclude '*/dist/*' --exclude '*/log/*' --exclude '*/tmp/*' "$BACKUP_DIR/Library/Application Support/${settingsdir[$d]}" "$DEST/Library/Application Support/"
done